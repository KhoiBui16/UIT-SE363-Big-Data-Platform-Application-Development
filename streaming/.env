
# ==============================
# TikTok Safety - Streaming Dev
# ==============================
# NOTE:
# - File này dùng cho môi trường DEV/đồ án.
# - Bạn có thể đổi các giá trị bên dưới mà không cần sửa code/compose.

# --- Postgres (pipeline DB) ---
POSTGRES_USER=user
POSTGRES_PASSWORD=password
POSTGRES_DB=tiktok_safety_db
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# --- MinIO ---
MINIO_ROOT_USER=admin
MINIO_ROOT_PASSWORD=password123
MINIO_ENDPOINT=http://minio:9000
# Use Tailscale IP for external access (change to your IP if different)
MINIO_PUBLIC_ENDPOINT=http://100.69.255.87:9000
MINIO_BUCKET_VIDEOS=tiktok-raw-videos
MINIO_BUCKET_AUDIOS=tiktok-raw-audios

# --- Airflow ---
AIRFLOW_DB_USER=airflow
AIRFLOW_DB_PASSWORD=airflow
AIRFLOW_DB_NAME=airflow
AIRFLOW_WEBSERVER_SECRET_KEY=my_very_secret_key_123
AIRFLOW_ADMIN_USERNAME=admin
AIRFLOW_ADMIN_PASSWORD=admin
AIRFLOW_ADMIN_EMAIL=admin@example.com

# --- Spark Streaming (tuning) ---
# default: latest để tránh reprocess khi restart; đổi sang earliest nếu muốn replay
KAFKA_STARTING_OFFSETS=latest

# checkpoint được mount vào ./state/spark_checkpoints (để restart vẫn giữ state)
SPARK_CHECKPOINT_DIR=/opt/spark/checkpoints/tiktok_multimodal

# scoring weights/threshold (0..1)
# TEXT_WEIGHT cao hơn giúp text blacklist (gái xinh, bikini...) có ảnh hưởng lớn hơn → giảm FN
# Với TEXT_WEIGHT=0.6: text=0.85, video=0.08 → avg=0.542 > 0.5 → harmful ✓
TEXT_WEIGHT=0.6
DECISION_THRESHOLD=0.5

# --- HuggingFace Hub Models ---
# Set HF_TOKEN as environment variable before running: export HF_TOKEN=your_token
# HF_TOKEN=your_huggingface_token_here
HF_MODEL_TEXT=KhoiBui/tiktok-text-safety-classifier
HF_MODEL_VIDEO=KhoiBui/tiktok-video-safety-classifier
HF_MODEL_FUSION=KhoiBui/tiktok-multimodal-fusion-classifier

